import{a as e,r as n,s as t,c as r}from"./p-6f5f21fe.js";function m(m={}){let a=[];const i={},s=document.querySelector("#adminmenuwrap")&&!m.adminUrl&&!m.network,o=m.network||e.data.isNetwork,c=!!e.data.network,u=m.adminUrl||(o?e.data.network:e.data.adminUrl),d=m.siteId||(o?0:e.data.siteId),f=!m.path&&o?"networkMenu":"menu";function p(n){n.querySelectorAll(".menu-top > a").forEach(((e,n)=>{const t=e.innerText.replace(/(\r\n|\n|\r)/gm,""),r=e.closest("li.menu-top"),m={};if(r){const e=r.querySelectorAll("a");e.forEach(((n,r)=>{if(0!==r&&e.length>=2||0===r&&1===e.length){const a=n.innerText.replace(/(\r\n|\n|\r)/gm,""),i=n.getAttribute("href");m[i]={adminUrl:u,href:u+i,index:1===e.length?r:r-1,name:a,nameParent:t,path:i,siteId:Number(d),type:f}}}))}i[t]={index:n,name:t,children:m}})),a=[{adminUrl:u,children:i,isMultisite:c,path:m.path||e.data.path,siteId:Number(d),type:f}],e.entriesMenu=a,e.entriesMenuActive=a,e.entriesMenuCurrentPath=m.path||e.data.path,e.entriesMenuIsNetwork=m.network,r()}s?p(document):(e.isLoading=!0,fetch(u).then((e=>e.text&&e.text())).then((e=>{p((new DOMParser).parseFromString(e,"text/html")),n(),t.active="menu"})).catch((e=>console.log(e))))}export{m as g}