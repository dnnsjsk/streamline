import{s as e,a as n}from"./p-e24a7e82.js";import{r as t}from"./p-d43c3ad5.js";const a=()=>{const t=[...e.entriesActions,...e.entriesMenu,...e.entriesNetworkMenu];e.entriesSearch=t,e.entriesSearchActive=t,e.entriesFavActive=e.entriesFav,e.entriesSiteActive=e.entriesSite,n()},r=(n={})=>{let r=[];const o={},m=document.querySelector("#adminmenuwrap")&&(n.network&&e.data.isNetwork||!n.network&&e.data.isAdmin&&!e.data.isNetwork),i=n.network,s=!!e.data.network,d=n.adminUrl||(i?e.data.network:e.data.adminUrl),u=n.siteId||(i?0:e.data.siteId),c=!n.path&&i?"networkMenu":"menu";function p(t){t.querySelectorAll(".menu-top > a").forEach(((e,n)=>{const t=e.innerText.replace(/(\r\n|\n|\r)/gm,""),a=e.closest("li.menu-top"),r={};if(a){const e=a.querySelectorAll("a");e.forEach(((n,a)=>{var o;if(0!==a&&e.length>=2||0===a&&1===e.length){const m=null===(o=[...n.childNodes].find((e=>e.nodeType===Node.TEXT_NODE)))||void 0===o?void 0:o.textContent.trim(),i=n.querySelector(".update-count")?m+` (${n.querySelector(".update-count").innerHTML})`:n.innerText.replace(/(\r\n|\n|\r)/gm,""),s=n.getAttribute("href");r[s]={adminUrl:d,href:d+s,index:1===e.length?a:a-1,name:i,nameParent:t,path:s,siteId:Number(u),type:c}}}))}o[t]={index:n,name:t,children:r}})),r=[{adminUrl:d,children:o,isMultisite:s,path:n.path||e.currentSite.path,siteId:Number(u),type:c}],i?e.entriesNetworkMenu=r:e.entriesMenu=r,a()}m&&!n.fetch?(p(document),n.callback&&n.callback()):(e.isLoading=!0,fetch(d).then((e=>e.text&&e.text())).then((e=>{p((new DOMParser).parseFromString(e,"text/html")),t(),n.callback&&n.callback()})).catch((()=>{})))};export{r as g,a as s}