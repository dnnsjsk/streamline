import{a as n,r as e,b as t,s as r}from"./p-1d6a5f98.js";function a(r={}){let a=[];const m={},i=document.querySelector("#adminmenuwrap")&&(r.network&&n.data.isNetwork||!r.network&&n.data.isAdmin&&!n.data.isNetwork),o=r.network,s=!!n.data.network,u=r.adminUrl||(o?n.data.network:n.data.adminUrl),d=r.siteId||(o?0:n.data.siteId),c=!r.path&&o?"networkMenu":"menu";function f(e){e.querySelectorAll(".menu-top > a").forEach(((n,e)=>{const t=n.innerText.replace(/(\r\n|\n|\r)/gm,""),r=n.closest("li.menu-top"),a={};if(r){const n=r.querySelectorAll("a");n.forEach(((e,r)=>{if(0!==r&&n.length>=2||0===r&&1===n.length){const m=e.innerText.replace(/(\r\n|\n|\r)/gm,""),i=e.getAttribute("href");a[i]={adminUrl:u,href:u+i,index:1===n.length?r:r-1,name:m,nameParent:t,path:i,siteId:Number(d),type:c}}}))}m[t]={index:e,name:t,children:a}})),a=[{adminUrl:u,children:m,isMultisite:s,path:r.path||n.currentSite.path,siteId:Number(d),type:c}],o?(n.entriesNetwork=a,n.entriesNetworkActive=a):(n.entriesMenu=a,n.entriesMenuActive=a,n.entriesMenuCurrentPath=r.path||n.currentSite.path),t()}i&&!r.fetch?f(document):(n.isLoading=!0,fetch(u).then((n=>n.text&&n.text())).then((n=>{f((new DOMParser).parseFromString(n,"text/html")),e()})).catch((()=>{})))}function m(){"menu"===r.active&&0===n.entriesMenu.length&&a({network:!1,adminUrl:n.data.adminUrl}),"network"===r.active&&0===n.entriesNetwork.length&&a({network:!0})}export{a,m as g}