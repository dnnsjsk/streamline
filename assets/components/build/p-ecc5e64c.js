import{s as n,r as e,b as t,a}from"./p-06ea0d0a.js";function r(a={}){let r=[];const o={},i=document.querySelector("#adminmenuwrap")&&(a.network&&n.data.isNetwork||!a.network&&n.data.isAdmin&&!n.data.isNetwork),u=a.network,m=!!n.data.network,d=a.adminUrl||(u?n.data.network:n.data.adminUrl),s=a.siteId||(u?0:n.data.siteId),c=!a.path&&u?"networkMenu":"menu";function p(e){e.querySelectorAll(".menu-top > a").forEach(((n,e)=>{const t=n.innerText.replace(/(\r\n|\n|\r)/gm,""),a=n.closest("li.menu-top"),r={};if(a){const n=a.querySelectorAll("a");n.forEach(((e,a)=>{var o;if(0!==a&&n.length>=2||0===a&&1===n.length){const i=null===(o=[...e.childNodes].find((n=>n.nodeType===Node.TEXT_NODE)))||void 0===o?void 0:o.textContent.trim(),u=e.querySelector(".update-count")?i+` (${e.querySelector(".update-count").innerHTML})`:e.innerText.replace(/(\r\n|\n|\r)/gm,""),m=e.getAttribute("href");r[m]={adminUrl:d,href:d+m,index:1===n.length?a:a-1,name:u,nameParent:t,path:m,siteId:Number(s),type:c}}}))}o[t]={index:e,name:t,children:r}})),r=[{adminUrl:d,children:o,isMultisite:m,path:a.path||n.currentSite.path,siteId:Number(s),type:c}],u?(n.entriesNetworkMenu=r,n.entriesNetworkMenuActive=r):(n.entriesMenu=r,n.entriesMenuActive=r,n.entriesMenuCurrentPath=a.path||n.currentSite.path),t()}i&&!a.fetch?p(document):(n.isLoading=!0,fetch(d).then((n=>n.text&&n.text())).then((n=>{p((new DOMParser).parseFromString(n,"text/html")),e()})).catch((()=>{})))}function o(){n.test||("menu"===a.active&&0===n.entriesMenu.length&&r({network:!1,adminUrl:n.data.adminUrl}),"networkMenu"===a.active&&0===n.entriesNetworkMenu.length&&r({network:!0}))}function i(e){return n.isMac?e.metaKey:e.ctrlKey}export{i as a,r as b,o as g}